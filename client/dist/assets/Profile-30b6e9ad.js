import{m as O,n as W,j as e,p as Y,b as d,q as ee,G as s,t as b,I as _,T as h,o as te,S as ie}from"./index-d1f1fba9.js";import{C as P,b as z,N as re}from"./Navbar-5bafe060.js";/* empty css               */import{f as ne,e as ae}from"./api-0223901b.js";import{C as x,G as q,R as G,a as H,d as V,b as J}from"./Chip-53dd063b.js";import{S as g}from"./Skeleton-aa64620b.js";import{L as le,A as se,a as oe,b as ce,d as de,M as ge}from"./ModalEditUser-52aad51b.js";import{d as ue}from"./LocationOn-ff92a64e.js";import{B as F}from"./Button-f9927e4f.js";import{T as E}from"./TextField-fc0ac885.js";import"./Favorite-a7aa2104.js";import"./useSlot-d68caabc.js";import"./useButton-a1d98608.js";import"./Popper-888f92e0.js";import"./InputAdornment-9a81b6f5.js";import"./ListItem-5c12c4a0.js";var B={},xe=W;Object.defineProperty(B,"__esModule",{value:!0});var N=B.default=void 0,he=xe(O()),me=e,fe=(0,he.default)((0,me.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");N=B.default=fe;var D={},pe=W;Object.defineProperty(D,"__esModule",{value:!0});var K=D.default=void 0,je=pe(O()),be=e,ve=(0,je.default)((0,be.jsx)("path",{d:"M11.67 3.87 9.9 2.1 0 12l9.9 9.9 1.77-1.77L3.54 12z"}),"ArrowBackIos");K=D.default=ve;var T={},ke=W;Object.defineProperty(T,"__esModule",{value:!0});var Q=T.default=void 0,ye=ke(O()),Ce=e,Se=(0,ye.default)((0,Ce.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");Q=T.default=Se;function Re({edit:a,setEdit:o}){const t=Y(m=>m.user.user),[r,w]=d.useState(!0),v=ee();return d.useEffect(()=>{t&&w(!1)},[t]),e.jsx(e.Fragment,{children:e.jsx(s,{container:!0,justifyContent:"center",alignItems:"center",sx:{mt:{sm:8,lg:15}},children:e.jsx(s,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsxs(P,{variant:"outlined",sx:{borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(b,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(b,{sx:{width:"100%",height:"100%",backgroundImage:`url(${t!=null&&t.coverPic?t==null?void 0:t.coverPic:"/cover-picture.png"})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsxs(b,{display:"flex",sx:{height:"4rem",backdropFilter:"brightness(-5)"},alignItems:"center",component:"nav",color:"Menu",children:[e.jsx(_,{sx:{ml:2,fontWeight:"bold"},onClick:()=>v("/"),children:e.jsx(K,{})}),e.jsx(h,{color:"black",marginLeft:2,fontFamily:"initial",fontWeight:"bold",variant:"h5",children:"Profile"})]})}),e.jsx(b,{sx:{objectFit:"cover",width:150,height:150,borderRadius:"5rem",position:"absolute",top:"100%",left:{xs:"10%",lg:"0%"},transform:"translate(50%, -50%)"},component:"img",src:t!=null&&t.profilePic?t==null?void 0:t.profilePic:"/avatar.jpg"})]}),e.jsx(z,{children:e.jsxs(s,{container:!0,children:[e.jsx(s,{item:!0,xs:2}),e.jsxs(s,{item:!0,xs:7,lg:8,sx:{mt:{xs:10,lg:9,xl:0},ml:3},children:[e.jsxs(h,{sx:{fontFamily:"sans-serif",fontSize:{lg:"2rem"},fontWeight:"bold"},children:[r?e.jsx(g,{width:"15rem"}):t.fullName," ",r?e.jsx(g,{width:"5rem"}):e.jsx(h,{variant:"caption",children:t.age})]}),e.jsx(h,{sx:{fontSize:{xs:7,lg:14}},variant:"subtitle2",children:r?e.jsx(g,{width:"13rem"}):t.bio}),e.jsx(h,{sx:{fontSize:{xs:7,lg:14}},variant:"subtitle2",children:r?e.jsx(g,{width:"13rem"}):t.location}),e.jsxs(s,{item:!0,xs:12,lg:!0,sx:{my:3,display:{lg:"flex"},justifyContent:"space-between"},children:[e.jsx(x,{startDecorator:e.jsx(q,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):t.gender}),e.jsx(x,{startDecorator:e.jsx(G,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):t.faith}),e.jsx(x,{startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):t.realationshipStatus}),e.jsx(x,{startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):t.smoking}),e.jsx(x,{startDecorator:e.jsx(J,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):t.drinking?t.drinking:""})]})]}),e.jsx(s,{item:!0,xs:!0,sx:{mt:{xs:8,lg:0}},children:e.jsx(_,{onClick:()=>o(!0),"aria-label":"edit",size:"large",children:e.jsx(Q,{sx:{color:"black"},fontSize:"inherit"})})}),e.jsx(s,{item:!0,xs:12,sx:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:t==null?void 0:t.images.map((m,k)=>e.jsx(P,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${m})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"}},k))})]})})]})})})})}function Pe({userData:a,setUserData:o,error:t,coverPicREF:r,profilePicREF:w,image0:v,image1:m,image2:k,openModal:f,handleSubmit:I,isLoading:u,loader:p,setLoader:y}){const C=i=>{i.target.files[0]&&o(l=>({...l,profilePic:URL.createObjectURL(i.target.files[0])}))},S=i=>{i.target.files[0]&&o(l=>({...l,coverPic:URL.createObjectURL(i.target.files[0])}))},c=i=>{i.target.files[0]&&o(l=>({...l,image0:URL.createObjectURL(i.target.files[0])}))},$=i=>{i.target.files[0]&&o(l=>({...l,image1:URL.createObjectURL(i.target.files[0])}))},A=i=>{i.target.files[0]&&o(l=>({...l,image2:URL.createObjectURL(i.target.files[0])}))},U=()=>{p||(y(!0),I())},M=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{const l=i.coords.latitude,L=i.coords.longitude;ne(l,L).then(n=>n.json()).then(n=>{o(j=>({...j,location:n.city+","+n.principalSubdivision}))})},i=>{console.log(i)}):alert("Geolocation is not supported by this browser.")},R=i=>{const l=new Date(i.$d),n=new Date().getTime()-l.getTime(),j=new Date(n),X=Math.abs(j.getUTCFullYear()-1970);o(Z=>({...Z,birthday:i.$d,age:X}))};return e.jsxs(P,{variant:"outlined",sx:{my:{xs:9,lg:0},borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(b,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(b,{sx:{width:"100%",height:"100%",backgroundImage:`url(${a.coverPic})`,bgcolor:"grey",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsx(F,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:r,onChange:S,hidden:!0,accept:"image/*",type:"file"})})}),e.jsx(b,{sx:{width:{xs:200,lg:280},height:{xs:200,lg:280},borderRadius:"13rem",position:"absolute",top:"100%",left:{sm:"18%",xl:"26%",lg:"13%"},transform:"translate(50%, -50%)",backgroundImage:`url(${a.profilePic})`,bgcolor:"black",backgroundSize:"cover"},children:e.jsx(F,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:w,onChange:C,hidden:!0,accept:"image/*",type:"file"})})})]}),e.jsx(z,{children:e.jsxs(s,{container:!0,spacing:2,sx:{mt:{xs:12,lg:20}},children:[e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(E,{label:"Full Name",variant:"outlined",value:a.fullName,...t.fullName?{error:!0}:{},fullWidth:!0,onChange:i=>o(l=>({...l,fullName:i.target.value}))}),t.fullName&&e.jsx(h,{sx:{color:"red"},children:t.fullName})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(E,{label:"Email Address",variant:"outlined",value:a.email,...t.email?{error:!0}:{},fullWidth:!0,onChange:i=>o(l=>({...l,email:i.target.value}))}),t.email&&e.jsx(h,{sx:{color:"red"},children:t.email})]}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(E,{sx:{mt:1},label:"Phone",variant:"outlined",value:a.phone,disabled:!0,fullWidth:!0})}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(le,{dateAdapter:se,children:e.jsx(oe,{components:["DatePicker"],children:e.jsx(ce,{label:"Birthday",value:de(a.birthday),onChange:R})})}),t.birthday&&e.jsx(h,{sx:{color:"red"},children:t.birthday})]}),e.jsxs(s,{item:!0,xs:12,sm:6,children:[e.jsx(F,{sx:{mt:2,p:1,color:"black",bgcolor:"transparent"},color:t.location?"error":"inherit",size:"small",fullWidth:!0,onClick:M,variant:"outlined",startIcon:e.jsx(ue,{}),children:a.location?a.location:"Location"}),t.location&&e.jsx(h,{sx:{color:"red"},children:t.location})]}),e.jsx(s,{item:!0,xs:12,sm:6,children:e.jsx(E,{id:"bio",label:"Your Bio",multiline:!0,fullWidth:!0,rows:4,value:a.bio,onChange:i=>o(l=>({...l,bio:i.target.value}))})}),e.jsxs(s,{item:!0,xs:12,lg:!0,sx:{my:3,display:{xs:"flex",lg:"flex"},flexDirection:{xs:"column",lg:"row"},justifyContent:"space-between"},children:[e.jsx(x,{onClick:()=>f("gender"),startDecorator:e.jsx(q,{}),color:"neutral",size:"lg",sx:{m:1},variant:"soft",children:u?e.jsx(g,{}):a.gender}),e.jsx(x,{sx:{m:1},onClick:()=>f("faith"),startDecorator:e.jsx(G,{}),color:"neutral",size:"lg",variant:"soft",children:u?e.jsx(g,{}):a.faith}),e.jsx(x,{sx:{m:1},onClick:()=>f("realationshipStatus"),startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",variant:"soft",children:u?e.jsx(g,{}):a.realationshipStatus}),e.jsx(x,{sx:{m:1},onClick:()=>f("smoking"),startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:u?e.jsx(g,{}):a.smoking}),e.jsx(x,{sx:{m:1},onClick:()=>f("drinking"),startDecorator:e.jsx(J,{}),color:"neutral",size:"lg",variant:"soft",children:u?e.jsx(g,{}):a.drinking})]}),e.jsxs(s,{item:!0,xs:12,sx:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:[e.jsx(P,{onClick:()=>v.current(),sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${a.image0})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},children:e.jsx(z,{children:e.jsxs(_,{color:"primary","aria-label":"upload picture",component:"label",children:[e.jsx("input",{ref:v,hidden:!0,accept:"image/*",type:"file",onChange:i=>c(i)}),a.image0?"":e.jsx(N,{sx:{color:"black"}})]})})}),e.jsx(P,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${a.image1})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},onClick:()=>m.current(),children:e.jsx(z,{children:e.jsxs(_,{color:"primary","aria-label":"upload picture",component:"label",children:[e.jsx("input",{ref:m,hidden:!0,accept:"image/*",type:"file",onChange:i=>$(i)}),a.image1?"":e.jsx(N,{sx:{color:"black"}})]})})}),e.jsx(P,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${a.image2})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"},onClick:()=>k.current(),children:e.jsx(z,{children:e.jsxs(_,{color:"primary","aria-label":"upload picture",component:"label",children:[e.jsx("input",{ref:k,hidden:!0,accept:"image/*",type:"file",onChange:i=>A(i)}),a.image2?"":e.jsx(N,{sx:{color:"black"}})]})})})]}),e.jsx(s,{item:!0,sx:{display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",mt:4},xs:12,children:e.jsx(F,{variant:"outlined",color:"warning",fullWidth:!0,onClick:U,children:p?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(e.Fragment,{children:"Save Changes"})})})]})})]})}function we({edit:a,setEdit:o}){const t=te(),r=Y(n=>n.user.user),[w,v]=d.useState(!0),[m,k]=d.useState(null),[f,I]=d.useState(!1),u=d.useRef(),p=d.useRef(),y=d.useRef(),C=d.useRef(),S=d.useRef(),[c,$]=d.useState({fullName:r.fullName,email:r.email,birthday:new Date(r.birthday),age:r.age,gender:r.gender||"Your Gender",location:r.location,phone:r.phone,Preference:r.Preference,profilePic:r.profilePic||"/avatar.jpg",coverPic:r.coverPic||"/cover-picture.png",faith:r.faith||"Your Religion",drinking:r.drinking||"Your Drinking Habit",smoking:r.smoking||"Your Smoking Habit",bio:r.bio,realationshipStatus:r.realationshipStatus||"Your RelationShip Status",image0:r.images[0],image1:r.images[1],image2:r.images[2]}),[A,U]=d.useState({}),[M,R]=d.useState(!1);d.useEffect(()=>{o(!0),r&&(v(!1),R(!1))},[]);const i=n=>{k(n),I(!0)},l=()=>{I(!1)},L=async()=>{const n=new FormData;n.append("fullName",c.fullName),n.append("email",c.email),n.append("birthday",c.birthday),n.append("age",c.age),n.append("gender",c.gender),n.append("location",c.location),n.append("faith",c.faith),n.append("drinking",c.drinking),n.append("smoking",c.smoking),n.append("bio",c.bio),n.append("phone",c.phone),n.append("Preference",c.Preference),n.append("realationshipStatus",c.realationshipStatus),p.current.files.length&&n.append("profilePic",p.current.files[0],p.current.files[0].name),u.current.files.length&&n.append("coverPic",u.current.files[0],u.current.files[0].name),y.current.files.length&&n.append("image0",y.current.files[0],y.current.files[0].name),C.current.files.length&&n.append("image1",C.current.files[0],C.current.files[0].name),S.current.files.length&&n.append("image2",S.current.files[0],S.current.files[0].name);try{const{data:j}=await ae(n);t(ie(j)),R(!1),o(!1)}catch(j){console.log(j.message),R(!1)}};return e.jsx(e.Fragment,{children:e.jsxs(s,{container:!0,justifyContent:"center",alignItems:"center",sx:{my:{lg:5},minHeight:"100vh"},children:[e.jsx(s,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsx(Pe,{userData:c,setUserData:$,error:A,coverPicREF:u,profilePicREF:p,image0:y,image1:C,image2:S,openModal:i,handleSubmit:L,isLoading:w,loader:M,setLoader:R})}),e.jsx(ge,{isModalOpen:f,closeModal:l,option:m,setModalOpen:I,setUserData:$})]})})}function Ye(){const[a,o]=d.useState(!1);return e.jsxs("div",{children:[e.jsx(re,{}),a?e.jsx(we,{edit:a,setEdit:o}):e.jsx(Re,{edit:a,setEdit:o})]})}export{Ye as default};
