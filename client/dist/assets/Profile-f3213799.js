import{p as X,q as D,j as e,w as M,b as u,x as ee,G as g,t as R,I as N,T as h,v as ie,y as te}from"./index-f613b954.js";import{b as L,C as Y,N as re}from"./Navbar-657ff42c.js";/* empty css               */import{e as ne,f as le,g as se}from"./api-9ad2fa78.js";import{d as ae,B as oe}from"./BoilerPlateCode-bb9f5851.js";import{d as ce,L as de,A as ge,a as ue,b as me,c as O,M as he}from"./ArrowBackIos-c75cb9a0.js";import{C as f,G as H,R as U,a as Z,d as V,b as J}from"./Chip-2def64cc.js";import{S as m}from"./Skeleton-e1792671.js";import{d as fe}from"./dayjs.min-8a57b27b.js";import{d as W}from"./Close-fbc69de3.js";import{B as w}from"./Button-3cdfd07c.js";import{T as _}from"./TextField-cd7d05dd.js";import"./Favorite-78b9b9c5.js";import"./useSlot-c8cc3803.js";import"./InputAdornment-47b57451.js";import"./ListItem-e6a19788.js";import"./useButton-dd23b069.js";var G={},xe=D;Object.defineProperty(G,"__esModule",{value:!0});var K=G.default=void 0,pe=xe(X()),je=e,be=(0,pe.default)((0,je.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");K=G.default=be;function ve({edit:b,setEdit:l}){const n=M(k=>k.user.user),[o,v]=u.useState(!0),c=ee();return u.useEffect(()=>{n&&v(!1)},[n]),e.jsx(e.Fragment,{children:e.jsx(g,{container:!0,justifyContent:"center",alignItems:"center",sx:{mt:{xs:8}},children:e.jsx(g,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsxs(L,{variant:"outlined",sx:{borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(R,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(R,{sx:{width:"100%",height:"100%",backgroundImage:`url(${n!=null&&n.coverPic?n==null?void 0:n.coverPic:"/cover-picture.png"})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsxs(R,{display:"flex",sx:{height:"4rem",backdropFilter:"brightness(-5)"},alignItems:"center",component:"nav",color:"Menu",children:[e.jsx(N,{sx:{ml:2,fontWeight:"bold"},onClick:()=>c("/"),children:e.jsx(ce,{})}),e.jsx(h,{color:"black",marginLeft:2,fontFamily:"initial",fontWeight:"bold",variant:"h5",children:"Profile"})]})}),e.jsx(R,{sx:{objectFit:"cover",width:200,height:200,borderRadius:"10rem",position:"absolute",top:"100%",left:{xs:"0%",sm:"20%",lg:"0%"},transform:"translate(50%, -50%)"},component:"img",src:n!=null&&n.profilePic?n==null?void 0:n.profilePic:"/avatar.jpg"})]}),e.jsx(Y,{children:e.jsxs(g,{container:!0,children:[e.jsx(g,{item:!0,xs:2.3,sm:2.5,lg:2.6}),e.jsxs(g,{item:!0,xs:6,lg:8,sx:{mt:{xs:14,lg:9,xl:0},ml:3},children:[e.jsxs(h,{sx:{fontFamily:"sans-serif",fontSize:{sm:"1.5rem",md:"2rem"},fontWeight:"bold"},children:[o?e.jsx(m,{width:"15rem"}):n.fullName," ",o?e.jsx(m,{width:"5rem"}):e.jsx(h,{variant:"caption",children:n.age})]}),e.jsx(h,{sx:{fontSize:{xs:7,sm:13,lg:14}},variant:"subtitle2",children:o?e.jsx(m,{width:"13rem"}):n.bio}),e.jsx(h,{sx:{fontSize:{xs:7,sm:13,lg:14}},variant:"subtitle2",children:o?e.jsx(m,{width:"13rem"}):n.location}),e.jsxs(g,{item:!0,xs:12,lg:!0,sx:{my:3,display:{lg:"flex"},justifyContent:"space-between"},children:[e.jsx(f,{startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",variant:"soft",children:o?e.jsx(m,{}):n.gender}),e.jsx(f,{startDecorator:e.jsx(U,{}),color:"neutral",size:"lg",variant:"soft",children:o?e.jsx(m,{}):n.faith}),e.jsx(f,{startDecorator:e.jsx(Z,{}),color:"neutral",size:"lg",variant:"soft",children:o?e.jsx(m,{}):n.realationshipStatus}),e.jsx(f,{startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:o?e.jsx(m,{}):n.smoking}),e.jsx(f,{startDecorator:e.jsx(J,{}),color:"neutral",size:"lg",variant:"soft",children:o?e.jsx(m,{}):n.drinking?n.drinking:""})]})]}),e.jsx(g,{item:!0,xs:!0,sx:{mt:{xs:14,lg:9,xl:0}},children:e.jsx(N,{onClick:()=>l(!0),"aria-label":"edit",size:"large",children:e.jsx(K,{sx:{color:"black"},fontSize:"inherit"})})}),e.jsx(g,{item:!0,xs:12,sx:{display:{sm:"flex"},flexDirection:{sm:"column",lg:"row"},justifyContent:{lg:"end",sm:"center"},alignContent:{lg:"end",sm:"center"},alignItems:{lg:"end",sm:"center"}},children:n==null?void 0:n.images.map((k,E)=>e.jsx(L,{sx:{m:2,width:{xs:300,sm:400,lg:250},height:{xs:250,sm:400,lg:250},backgroundImage:`url(${k})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"}},E))})]})})]})})})})}function ke({validateInputs:b,userData:l,setUserData:n,error:o,coverPicREF:v,profilePicREF:c,image0:k,image1:E,image2:A,openModal:y,handleSubmit:T,isLoading:x,loader:C,setLoader:z}){const p=r=>{r.target.files[0]&&n(d=>({...d,profilePic:URL.createObjectURL(r.target.files[0])}))},P=r=>{r.target.files[0]&&n(d=>({...d,coverPic:URL.createObjectURL(r.target.files[0])}))},S=r=>{r.target.files[0]&&n(d=>({...d,image0:URL.createObjectURL(r.target.files[0])}))},t=r=>{r.target.files[0]&&n(d=>({...d,image1:URL.createObjectURL(r.target.files[0])}))},q=r=>{r.target.files[0]&&n(d=>({...d,image2:URL.createObjectURL(r.target.files[0])}))},F=()=>{b()&&(C||(z(!0),T()))},s=async r=>{await ne({path:r})},B=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{const d=r.coords.latitude,$=r.coords.longitude;le(d,$).then(j=>j.json()).then(j=>{n(a=>({...a,location:j.city+","+j.principalSubdivision}))})},r=>{console.log(r)}):alert("Geolocation is not supported by this browser.")},I=r=>{const d=new Date(r.$d),j=new Date().getTime()-d.getTime(),a=new Date(j),i=Math.abs(a.getUTCFullYear()-1970);n(Q=>({...Q,birthday:r.$d,age:i}))};return e.jsxs(L,{variant:"outlined",sx:{my:{xs:9,lg:0},borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(R,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(R,{sx:{width:"100%",height:"100%",backgroundImage:`url(${l.coverPic})`,bgcolor:"grey",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsx(w,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:v,onChange:P,hidden:!0,accept:"image/*",type:"file"})})}),e.jsx(R,{sx:{width:{xs:200,lg:280},height:{xs:200,lg:280},borderRadius:"13rem",position:"absolute",top:"100%",left:{sm:"18%",xl:"26%",lg:"13%"},transform:"translate(50%, -50%)",backgroundImage:`url(${l.profilePic})`,bgcolor:"black",backgroundSize:"cover"},children:e.jsx(w,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:c,onChange:p,hidden:!0,accept:"image/*",type:"file"})})})]}),e.jsx(Y,{children:e.jsxs(g,{container:!0,spacing:2,sx:{mt:{xs:12,lg:20}},children:[e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(_,{label:"Full Name",variant:"outlined",value:l.fullName,...o.fullName?{error:!0}:{},fullWidth:!0,onChange:r=>n(d=>({...d,fullName:r.target.value}))}),o.fullName&&e.jsx(h,{sx:{color:"red"},children:o.fullName})]}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(_,{label:"Email Address",variant:"outlined",value:l.email,...o.email?{error:!0}:{},fullWidth:!0,onChange:r=>n(d=>({...d,email:r.target.value}))}),o.email&&e.jsx(h,{sx:{color:"red"},children:o.email})]}),e.jsx(g,{item:!0,xs:12,sm:6,children:e.jsx(_,{sx:{mt:1},label:"Phone",variant:"outlined",value:l.phone,disabled:!0,fullWidth:!0})}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(de,{dateAdapter:ge,children:e.jsx(ue,{components:["DatePicker"],children:e.jsx(me,{label:"Birthday",value:fe(l.birthday),onChange:I})})}),o.birthday&&e.jsx(h,{sx:{color:"red"},children:o.birthday})]}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(w,{sx:{mt:2,p:1,color:"black",bgcolor:"transparent"},color:o.location?"error":"inherit",size:"small",fullWidth:!0,onClick:B,variant:"outlined",startIcon:e.jsx(ae,{}),children:l.location?l.location:"Location"}),o.location&&e.jsx(h,{sx:{color:"red"},children:o.location})]}),e.jsxs(g,{item:!0,xs:12,sm:6,children:[e.jsx(_,{id:"bio",label:"Your Bio",multiline:!0,fullWidth:!0,...o.bio?{error:!0}:{},rows:4,value:l.bio,onChange:r=>n(d=>({...d,bio:r.target.value}))}),o.bio&&e.jsx(h,{sx:{color:"red"},children:o.bio})]}),e.jsxs(g,{item:!0,xs:12,lg:!0,sx:{my:3,display:{xs:"flex",lg:"flex"},flexDirection:{xs:"column",lg:"row"},justifyContent:"space-between"},children:[e.jsx(f,{onClick:()=>y("gender"),startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",sx:{m:1},variant:"soft",children:x?e.jsx(m,{}):l.gender}),e.jsx(f,{sx:{m:1},onClick:()=>y("faith"),startDecorator:e.jsx(U,{}),color:"neutral",size:"lg",variant:"soft",children:x?e.jsx(m,{}):l.faith}),e.jsx(f,{sx:{m:1},onClick:()=>y("realationshipStatus"),startDecorator:e.jsx(Z,{}),color:"neutral",size:"lg",variant:"soft",children:x?e.jsx(m,{}):l.realationshipStatus}),e.jsx(f,{sx:{m:1},onClick:()=>y("smoking"),startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:x?e.jsx(m,{}):l.smoking}),e.jsx(f,{sx:{m:1},onClick:()=>y("drinking"),startDecorator:e.jsx(J,{}),color:"neutral",size:"lg",variant:"soft",children:x?e.jsx(m,{}):l.drinking})]}),e.jsxs(g,{item:!0,xs:12,sx:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:[e.jsxs(L,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${l.image0})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[l.image0&&e.jsx(N,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{s(l.image0),n(r=>({...r,image0:""}))},children:e.jsx(W,{})}),e.jsxs(w,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:k,hidden:!0,accept:"image/*",type:"file",onChange:r=>S(r)}),l.image0?"":e.jsx(O,{sx:{color:"black"}})]})]}),e.jsxs(L,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${l.image1})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[l.image1&&e.jsx(N,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{s(l.image1),n(r=>({...r,image1:""}))},children:e.jsx(W,{})}),e.jsxs(w,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:E,hidden:!0,accept:"image/*",type:"file",onChange:r=>t(r)}),l.image1?"":e.jsx(O,{sx:{color:"black"}})]})]}),e.jsxs(L,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${l.image2})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[l.image2&&e.jsx(N,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{s(l.image2),n(r=>({...r,image2:""}))},children:e.jsx(W,{})}),e.jsxs(w,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:A,hidden:!0,accept:"image/*",type:"file",onChange:r=>q(r)}),l.image2?"":e.jsx(O,{sx:{color:"black"}})]})]})]}),e.jsx(g,{item:!0,sx:{display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",mt:4},xs:12,children:e.jsx(w,{variant:"outlined",color:"warning",fullWidth:!0,onClick:F,children:C?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(e.Fragment,{children:"Save Changes"})})})]})})]})}function ye({edit:b,setEdit:l}){const n=ie(),[o,v]=u.useState({}),c=M(a=>a.user.user),[k,E]=u.useState(!0),[A,y]=u.useState(null),[T,x]=u.useState(!1),C=u.useRef(),z=u.useRef(),p=u.useRef(),P=u.useRef(),S=u.useRef(),[t,q]=u.useState({fullName:c.fullName,email:c.email,birthday:new Date(c.birthday),age:c.age,gender:c.gender||"Your Gender",location:c.location,phone:c.phone,Preference:c.Preference,profilePic:c.profilePic||"/avatar.jpg",coverPic:c.coverPic||"/cover-picture.png",faith:c.faith||"Your Religion",drinking:c.drinking||"Your Drinking Habit",smoking:c.smoking||"Your Smoking Habit",bio:c.bio,realationshipStatus:c.realationshipStatus||"Your RelationShip Status",image0:c.images[0],image1:c.images[1],image2:c.images[2]}),[F,s]=u.useState({}),[B,I]=u.useState(!1);u.useEffect(()=>{l(!0),c&&(E(!1),I(!1))},[]);const r=a=>{y(a),x(!0)},d=()=>{x(!1)},$=async()=>{const a=new FormData;a.append("fullName",t.fullName),a.append("email",t.email),a.append("birthday",t.birthday),a.append("age",t.age),a.append("gender",t.gender),a.append("location",t.location),a.append("faith",t.faith),a.append("drinking",t.drinking),a.append("smoking",t.smoking),a.append("bio",t.bio),a.append("phone",t.phone),a.append("Preference",t.Preference),a.append("realationshipStatus",t.realationshipStatus),z.current.files.length&&a.append("profilePic",z.current.files[0],z.current.files[0].name),C.current.files.length&&a.append("coverPic",C.current.files[0],C.current.files[0].name),t.image0&&p.current.files.length&&a.append("image0",p.current.files[0],p.current.files[0].name),t.image1&&P.current.files.length&&a.append("image1",P.current.files[0],P.current.files[0].name),t.image2&&S.current.files.length&&a.append("image2",S.current.files[0],S.current.files[0].name);for(let i of a.entries())console.log(i);try{const{data:i}=await se(a);n(te(i)),I(!1),l(!1)}catch(i){console.log(i.message),I(!1)}};u.useEffect(()=>{console.log(p.current.files)},[p,P,S]);const j=()=>{console.log("inHere to validate",F);const a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.fullName?s(i=>({...i,fullName:null})):s(i=>({...i,fullName:"*FullName is required"})),t.email?a.test(t.email)?s(i=>({...i,email:null})):s(i=>({...i,email:"*Enter a valid email"})):s(i=>({...i,email:"*Email is required"})),t.birthday||s(i=>({...i,birthday:"*Birthdate is required"})),t.birthday&&t.age<18?s(i=>({...i,birthday:"*Should be  18+"})):s(i=>({...i,birthday:null})),t.gender?s(i=>({...i,gender:null})):s(i=>({...i,gender:"*Gender is required"})),t.Preference?s(i=>({...i,Preference:null})):s(i=>({...i,Preference:"*Preference is required"})),t.faith?s(i=>({...i,faith:null})):s(i=>({...i,faith:"*this field is required"})),t.realationshipStatus?s(i=>({...i,realationshipStatus:null})):s(i=>({...i,realationshipStatus:"*this field is required"})),t.smoking?s(i=>({...i,smoking:null})):s(i=>({...i,smoking:"*this field is required"})),t.drinking?s(i=>({...i,drinking:null})):s(i=>({...i,drinking:"*this field is required"})),t.bio?s(i=>({...i,bio:null})):s(i=>({...i,bio:"*Bio is required"})),t.location?s(i=>({...i,location:null})):s(i=>({...i,location:"*Location is required"})),t.profilePic?s(i=>({...i,profilePic:null})):s(i=>({...i,profilePic:"*Location is required"})),t.coverPic?s(i=>({...i,profilePic:null})):s(i=>({...i,profilePic:"*Location is required"})),t.fullName&&t.email&&t.birthday&&t.age>18&&t.gender&&t.Preference&&t.location&&t.drinking&&t.realationshipStatus&&t.faith&&t.smoking&&t.profilePic&&t.coverPic?(s({}),!0):(v({}),v({data:"Please check the form for errors.",success:!1,open:!0}),!1)};return e.jsx(e.Fragment,{children:e.jsxs(g,{container:!0,justifyContent:"center",alignItems:"center",sx:{my:{lg:5},minHeight:"100vh"},children:[e.jsx(oe,{success:o.success,open:o.open,data:o.data,setToastClosed:()=>v({})}),e.jsx(g,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsx(ke,{validateInputs:j,userData:t,setUserData:q,error:F,coverPicREF:C,profilePicREF:z,image0:p,image1:P,image2:S,openModal:r,handleSubmit:$,isLoading:k,loader:B,setLoader:I})}),e.jsx(he,{isModalOpen:T,closeModal:d,option:A,setModalOpen:x,setUserData:q})]})})}function Oe(){const[b,l]=u.useState(!1);return e.jsxs("div",{children:[e.jsx(re,{}),b?e.jsx(ye,{edit:b,setEdit:l}):e.jsx(ve,{edit:b,setEdit:l})]})}export{Oe as default};
