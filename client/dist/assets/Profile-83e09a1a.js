import{p as X,q as Z,j as e,w as Y,b as d,x as D,G as o,t as y,I as F,T as u,v as ee,y as te}from"./index-4b91a940.js";import{b as w,C as B,N as ie}from"./Navbar-58c71366.js";/* empty css               */import{e as ne,f as re,g as se}from"./api-9ad2fa78.js";import{d as ae}from"./ReactToastify-d92cff4f.js";import{c as le,L as oe,A as ce,a as de,b as ge,d as xe,e as O,M as me}from"./ArrowBackIos-ee578d24.js";import{C as h,G,R as q,a as U,d as H,b as V}from"./Chip-8f2b4bc2.js";import{S as g}from"./Skeleton-46470d2e.js";import{d as W}from"./Close-8bda193a.js";import{B as C}from"./Button-72ea9cc8.js";import{T as $}from"./TextField-6f01cc51.js";import"./Favorite-12fea0c8.js";import"./useSlot-6db92b16.js";import"./InputAdornment-ec6617b8.js";import"./ListItem-b4ab21cf.js";import"./useButton-89c26cc2.js";var T={},he=Z;Object.defineProperty(T,"__esModule",{value:!0});var J=T.default=void 0,ue=he(X()),fe=e,pe=(0,ue.default)((0,fe.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");J=T.default=pe;function je({edit:n,setEdit:l}){const i=Y(p=>p.user.user),[r,R]=d.useState(!0),P=D();return d.useEffect(()=>{i&&R(!1)},[i]),e.jsx(e.Fragment,{children:e.jsx(o,{container:!0,justifyContent:"center",alignItems:"center",sx:{mt:{xs:8}},children:e.jsx(o,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsxs(w,{variant:"outlined",sx:{borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(y,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(y,{sx:{width:"100%",height:"100%",backgroundImage:`url(${i!=null&&i.coverPic?i==null?void 0:i.coverPic:"/cover-picture.png"})`,backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsxs(y,{display:"flex",sx:{height:"4rem",backdropFilter:"brightness(-5)"},alignItems:"center",component:"nav",color:"Menu",children:[e.jsx(F,{sx:{ml:2,fontWeight:"bold"},onClick:()=>P("/"),children:e.jsx(le,{})}),e.jsx(u,{color:"black",marginLeft:2,fontFamily:"initial",fontWeight:"bold",variant:"h5",children:"Profile"})]})}),e.jsx(y,{sx:{objectFit:"cover",width:200,height:200,borderRadius:"10rem",position:"absolute",top:"100%",left:{xs:"0%",sm:"20%",lg:"0%"},transform:"translate(50%, -50%)"},component:"img",src:i!=null&&i.profilePic?i==null?void 0:i.profilePic:"/avatar.jpg"})]}),e.jsx(B,{children:e.jsxs(o,{container:!0,children:[e.jsx(o,{item:!0,xs:2.3,sm:2.5,lg:2.6}),e.jsxs(o,{item:!0,xs:6,lg:8,sx:{mt:{xs:14,lg:9,xl:0},ml:3},children:[e.jsxs(u,{sx:{fontFamily:"sans-serif",fontSize:{sm:"1.5rem",md:"2rem"},fontWeight:"bold"},children:[r?e.jsx(g,{width:"15rem"}):i.fullName," ",r?e.jsx(g,{width:"5rem"}):e.jsx(u,{variant:"caption",children:i.age})]}),e.jsx(u,{sx:{fontSize:{xs:7,sm:13,lg:14}},variant:"subtitle2",children:r?e.jsx(g,{width:"13rem"}):i.bio}),e.jsx(u,{sx:{fontSize:{xs:7,sm:13,lg:14}},variant:"subtitle2",children:r?e.jsx(g,{width:"13rem"}):i.location}),e.jsxs(o,{item:!0,xs:12,lg:!0,sx:{my:3,display:{lg:"flex"},justifyContent:"space-between"},children:[e.jsx(h,{startDecorator:e.jsx(G,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):i.gender}),e.jsx(h,{startDecorator:e.jsx(q,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):i.faith}),e.jsx(h,{startDecorator:e.jsx(U,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):i.realationshipStatus}),e.jsx(h,{startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):i.smoking}),e.jsx(h,{startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:r?e.jsx(g,{}):i.drinking?i.drinking:""})]})]}),e.jsx(o,{item:!0,xs:!0,sx:{mt:{xs:14,lg:9,xl:0}},children:e.jsx(F,{onClick:()=>l(!0),"aria-label":"edit",size:"large",children:e.jsx(J,{sx:{color:"black"},fontSize:"inherit"})})}),e.jsx(o,{item:!0,xs:12,sx:{display:{sm:"flex"},flexDirection:{sm:"column",lg:"row"},justifyContent:{lg:"end",sm:"center"},alignContent:{lg:"end",sm:"center"},alignItems:{lg:"end",sm:"center"}},children:i==null?void 0:i.images.map((p,z)=>e.jsx(w,{sx:{m:2,width:{xs:300,sm:400,lg:250},height:{xs:250,sm:400,lg:250},backgroundImage:`url(${p})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center"}},z))})]})})]})})})})}function be({userData:n,setUserData:l,error:i,coverPicREF:r,profilePicREF:R,image0:P,image1:p,image2:z,openModal:j,handleSubmit:I,isLoading:m,loader:b,setLoader:f}){const v=t=>{t.target.files[0]&&l(a=>({...a,profilePic:URL.createObjectURL(t.target.files[0])}))},k=t=>{t.target.files[0]&&l(a=>({...a,coverPic:URL.createObjectURL(t.target.files[0])}))},c=t=>{t.target.files[0]&&l(a=>({...a,image0:URL.createObjectURL(t.target.files[0])}))},E=t=>{t.target.files[0]&&l(a=>({...a,image1:URL.createObjectURL(t.target.files[0])}))},N=t=>{t.target.files[0]&&l(a=>({...a,image2:URL.createObjectURL(t.target.files[0])}))},M=()=>{b||(f(!0),I())},L=async t=>{await ne({path:t})},S=()=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{const a=t.coords.latitude,s=t.coords.longitude;re(a,s).then(x=>x.json()).then(x=>{l(A=>({...A,location:x.city+","+x.principalSubdivision}))})},t=>{console.log(t)}):alert("Geolocation is not supported by this browser.")},_=t=>{const a=new Date(t.$d),x=new Date().getTime()-a.getTime(),A=new Date(x),K=Math.abs(A.getUTCFullYear()-1970);l(Q=>({...Q,birthday:t.$d,age:K}))};return e.jsxs(w,{variant:"outlined",sx:{my:{xs:9,lg:0},borderRadius:6,backdropFilter:"brightness(0.9) blur(15px)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:[e.jsxs(y,{sx:{width:"100%",height:"40vh",position:"relative"},children:[e.jsx(y,{sx:{width:"100%",height:"100%",backgroundImage:`url(${n.coverPic})`,bgcolor:"grey",backgroundSize:"cover",backgroundRepeat:"no-repeat"},children:e.jsx(C,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:r,onChange:k,hidden:!0,accept:"image/*",type:"file"})})}),e.jsx(y,{sx:{width:{xs:200,lg:280},height:{xs:200,lg:280},borderRadius:"13rem",position:"absolute",top:"100%",left:{sm:"18%",xl:"26%",lg:"13%"},transform:"translate(50%, -50%)",backgroundImage:`url(${n.profilePic})`,bgcolor:"black",backgroundSize:"cover"},children:e.jsx(C,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:e.jsx("input",{ref:R,onChange:v,hidden:!0,accept:"image/*",type:"file"})})})]}),e.jsx(B,{children:e.jsxs(o,{container:!0,spacing:2,sx:{mt:{xs:12,lg:20}},children:[e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsx($,{label:"Full Name",variant:"outlined",value:n.fullName,...i.fullName?{error:!0}:{},fullWidth:!0,onChange:t=>l(a=>({...a,fullName:t.target.value}))}),i.fullName&&e.jsx(u,{sx:{color:"red"},children:i.fullName})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsx($,{label:"Email Address",variant:"outlined",value:n.email,...i.email?{error:!0}:{},fullWidth:!0,onChange:t=>l(a=>({...a,email:t.target.value}))}),i.email&&e.jsx(u,{sx:{color:"red"},children:i.email})]}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx($,{sx:{mt:1},label:"Phone",variant:"outlined",value:n.phone,disabled:!0,fullWidth:!0})}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsx(oe,{dateAdapter:ce,children:e.jsx(de,{components:["DatePicker"],children:e.jsx(ge,{label:"Birthday",value:xe(n.birthday),onChange:_})})}),i.birthday&&e.jsx(u,{sx:{color:"red"},children:i.birthday})]}),e.jsxs(o,{item:!0,xs:12,sm:6,children:[e.jsx(C,{sx:{mt:2,p:1,color:"black",bgcolor:"transparent"},color:i.location?"error":"inherit",size:"small",fullWidth:!0,onClick:S,variant:"outlined",startIcon:e.jsx(ae,{}),children:n.location?n.location:"Location"}),i.location&&e.jsx(u,{sx:{color:"red"},children:i.location})]}),e.jsx(o,{item:!0,xs:12,sm:6,children:e.jsx($,{id:"bio",label:"Your Bio",multiline:!0,fullWidth:!0,rows:4,value:n.bio,onChange:t=>l(a=>({...a,bio:t.target.value}))})}),e.jsxs(o,{item:!0,xs:12,lg:!0,sx:{my:3,display:{xs:"flex",lg:"flex"},flexDirection:{xs:"column",lg:"row"},justifyContent:"space-between"},children:[e.jsx(h,{onClick:()=>j("gender"),startDecorator:e.jsx(G,{}),color:"neutral",size:"lg",sx:{m:1},variant:"soft",children:m?e.jsx(g,{}):n.gender}),e.jsx(h,{sx:{m:1},onClick:()=>j("faith"),startDecorator:e.jsx(q,{}),color:"neutral",size:"lg",variant:"soft",children:m?e.jsx(g,{}):n.faith}),e.jsx(h,{sx:{m:1},onClick:()=>j("realationshipStatus"),startDecorator:e.jsx(U,{}),color:"neutral",size:"lg",variant:"soft",children:m?e.jsx(g,{}):n.realationshipStatus}),e.jsx(h,{sx:{m:1},onClick:()=>j("smoking"),startDecorator:e.jsx(H,{}),color:"neutral",size:"lg",variant:"soft",children:m?e.jsx(g,{}):n.smoking}),e.jsx(h,{sx:{m:1},onClick:()=>j("drinking"),startDecorator:e.jsx(V,{}),color:"neutral",size:"lg",variant:"soft",children:m?e.jsx(g,{}):n.drinking})]}),e.jsxs(o,{item:!0,xs:12,sx:{display:"flex",justifyContent:"end",alignContent:"end",alignItems:"end"},children:[e.jsxs(w,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${n.image0})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[n.image0&&e.jsx(F,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{L(n.image0),l(t=>({...t,image0:""}))},children:e.jsx(W,{})}),e.jsxs(C,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:P,hidden:!0,accept:"image/*",type:"file",onChange:t=>c(t)}),n.image0?"":e.jsx(O,{sx:{color:"black"}})]})]}),e.jsxs(w,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${n.image1})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[n.image1&&e.jsx(F,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{L(n.image1),l(t=>({...t,image1:""}))},children:e.jsx(W,{})}),e.jsxs(C,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:p,hidden:!0,accept:"image/*",type:"file",onChange:t=>E(t)}),n.image1?"":e.jsx(O,{sx:{color:"black"}})]})]}),e.jsxs(w,{sx:{mr:2,width:{xs:100,sm:150,lg:250},height:{xs:100,sm:150,lg:250},backgroundImage:`url(${n.image2})`,bgcolor:"lightgray",backgroundSize:"cover",backgroundRepeat:"no-repeat",display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",position:"relative"},children:[n.image2&&e.jsx(F,{sx:{position:"absolute",top:5,right:5,color:"black",backgroundColor:"white",zIndex:1},size:"small",onClick:()=>{L(n.image2),l(t=>({...t,image2:""}))},children:e.jsx(W,{})}),e.jsxs(C,{component:"label",hidden:!0,sx:{width:"100%",height:"100%"},children:[e.jsx("input",{ref:z,hidden:!0,accept:"image/*",type:"file",onChange:t=>N(t)}),n.image2?"":e.jsx(O,{sx:{color:"black"}})]})]})]}),e.jsx(o,{item:!0,sx:{display:"flex",justifyContent:"center",alignContent:"center",alignItems:"center",mt:4},xs:12,children:e.jsx(C,{variant:"outlined",color:"warning",fullWidth:!0,onClick:M,children:b?e.jsx(e.Fragment,{children:"Loading..."}):e.jsx(e.Fragment,{children:"Save Changes"})})})]})})]})}function ve({edit:n,setEdit:l}){const i=ee(),r=Y(s=>s.user.user),[R,P]=d.useState(!0),[p,z]=d.useState(null),[j,I]=d.useState(!1),m=d.useRef(),b=d.useRef(),f=d.useRef(),v=d.useRef(),k=d.useRef(),[c,E]=d.useState({fullName:r.fullName,email:r.email,birthday:new Date(r.birthday),age:r.age,gender:r.gender||"Your Gender",location:r.location,phone:r.phone,Preference:r.Preference,profilePic:r.profilePic||"/avatar.jpg",coverPic:r.coverPic||"/cover-picture.png",faith:r.faith||"Your Religion",drinking:r.drinking||"Your Drinking Habit",smoking:r.smoking||"Your Smoking Habit",bio:r.bio,realationshipStatus:r.realationshipStatus||"Your RelationShip Status",image0:r.images[0],image1:r.images[1],image2:r.images[2]}),[N,M]=d.useState({}),[L,S]=d.useState(!1);d.useEffect(()=>{l(!0),r&&(P(!1),S(!1))},[]);const _=s=>{z(s),I(!0)},t=()=>{I(!1)},a=async()=>{const s=new FormData;s.append("fullName",c.fullName),s.append("email",c.email),s.append("birthday",c.birthday),s.append("age",c.age),s.append("gender",c.gender),s.append("location",c.location),s.append("faith",c.faith),s.append("drinking",c.drinking),s.append("smoking",c.smoking),s.append("bio",c.bio),s.append("phone",c.phone),s.append("Preference",c.Preference),s.append("realationshipStatus",c.realationshipStatus),b.current.files.length&&s.append("profilePic",b.current.files[0],b.current.files[0].name),m.current.files.length&&s.append("coverPic",m.current.files[0],m.current.files[0].name),c.image0&&f.current.files.length&&s.append("image0",f.current.files[0],f.current.files[0].name),c.image1&&v.current.files.length&&s.append("image1",v.current.files[0],v.current.files[0].name),c.image2&&k.current.files.length&&s.append("image2",k.current.files[0],k.current.files[0].name);for(let x of s.entries())console.log(x);try{const{data:x}=await se(s);i(te(x)),S(!1),l(!1)}catch(x){console.log(x.message),S(!1)}};return d.useEffect(()=>{console.log(f.current.files)},[f,v,k]),e.jsx(e.Fragment,{children:e.jsxs(o,{container:!0,justifyContent:"center",alignItems:"center",sx:{my:{lg:5},minHeight:"100vh"},children:[e.jsx(o,{item:!0,xs:12,sm:10,md:8,lg:6,xl:10,children:e.jsx(be,{userData:c,setUserData:E,error:N,coverPicREF:m,profilePicREF:b,image0:f,image1:v,image2:k,openModal:_,handleSubmit:a,isLoading:R,loader:L,setLoader:S})}),e.jsx(me,{isModalOpen:j,closeModal:t,option:p,setModalOpen:I,setUserData:E})]})})}function Oe(){const[n,l]=d.useState(!1);return e.jsxs("div",{children:[e.jsx(ie,{}),n?e.jsx(ve,{edit:n,setEdit:l}):e.jsx(je,{edit:n,setEdit:l})]})}export{Oe as default};
